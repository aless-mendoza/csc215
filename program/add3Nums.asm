; ADD 3 DIGIT NUMBERS
; BY ALESSANDRA MENDOZA & DYLAN CHEN

; setup till start
CR	EQU	0DH
LF	EQU	0AH
CTRLZ	EQU	1AH

RCONF	EQU	1
WCONF	EQU	2
RBUFF	EQU	10

RBOOT	EQU	0
BDOS	EQU	5
TPA	EQU	100H

	ORG	TPA

; main loop-
; stack
START:	LXI	SP,STAK
; newline
START1:	CALL	CCRLF
	LXI	H,SINON
; print
	CALL	COMSG
START2:	CALL	CIMSG
	CALL	CCRLF
	LXI	H,INBUF+2
	CALL	COMSG
	CALL	CCRLF
	JMP	START2

; display at sinon
SINON:	DB	'SIGN-ON MESSAGE',CR,LF,0


; functions
CI:	PUSH	B
	PUSH	D
	PUSH	H
	MVI	C,RCONF
	CALL	BDOS
	ANI	7FH
	POP	H
	POP	D
	POP	B
	RET

CO:	PUSH	B
	PUSH	D
	PUSH	H
	MVI	C,WCONF
	MOV	E,A
	CALL	BDOS
	POP	H
	POP	D
	POP	B
	RET

CCRLF:	MVI	A,CR
	CALL	CO
	MVI	A,LF
	JMP	CO

COMSG:	MOV	A,M
	ORA	A
	RZ
	CALL	CO
	INX	H
	JMP	COMSG

CIMSG:	PUSH	B
	PUSH	D
	PUSH	H
	LXI	H,INBUF+1
	MVI	M,0
	DCX	H
	MVI	M,80
	XCHG
	MVI	C,RBUFF
	CALL	BDOS
	LXI	H,INBUF+1
	MOV	E,M
	MVI	D,0
	DAD	D
	INX	H
	MVI	M,0
	POP	H
	POP	D
	POP	B
	RET

INBUF:	DS	83

	DS	64
STAK:	DB	0

	END
